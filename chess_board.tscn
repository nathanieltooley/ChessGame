[gd_scene load_steps=12 format=3 uid="uid://caaargxpskoar"]

[ext_resource type="TileSet" uid="uid://c7ukin0acqjbo" path="res://Assets/BoardTiles/chess_board_tileset.tres" id="1_i0ywi"]
[ext_resource type="Script" path="res://Scripts/TurnService.cs" id="1_n7sbn"]
[ext_resource type="Script" path="res://Scripts/Main.cs" id="1_xg0fo"]
[ext_resource type="Script" path="res://Scripts/UI/MainGameGUI.cs" id="1_ykarp"]
[ext_resource type="Script" path="res://Scripts/GameInfoService.cs" id="2_3pvxi"]
[ext_resource type="Script" path="res://Scripts/UI/DebugMenuLogic.cs" id="3_tmi2x"]
[ext_resource type="Script" path="res://Scripts/TimerService.cs" id="4_kv3it"]
[ext_resource type="Script" path="res://Scripts/Controllers/BoardController.cs" id="5_pof32"]
[ext_resource type="Script" path="res://Scripts/Controllers/PlayerMovementController.cs" id="6_h8401"]
[ext_resource type="Script" path="res://Scripts/Boards/GraphicalBoard.cs" id="8_p0nd3"]

[sub_resource type="Theme" id="Theme_qwx6e"]

[node name="Main" type="Node2D"]
script = ExtResource("1_xg0fo")

[node name="Services" type="Node" parent="."]

[node name="GameInfoService" type="Node" parent="Services"]
script = ExtResource("2_3pvxi")

[node name="TurnService" type="Node" parent="Services"]
script = ExtResource("1_n7sbn")

[node name="TimerService" type="Node" parent="Services"]
script = ExtResource("4_kv3it")

[node name="Controllers" type="Node" parent="."]

[node name="BoardController" type="Node" parent="Controllers"]
script = ExtResource("5_pof32")

[node name="PlayerInputController" type="Node" parent="Controllers"]
script = ExtResource("6_h8401")

[node name="MainGameGUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 1200.0
offset_bottom = 897.0
script = ExtResource("1_ykarp")

[node name="BG" type="PanelContainer" parent="MainGameGUI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="MarginContainer" type="MarginContainer" parent="MainGameGUI"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.613
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/margin_top = 220
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 200

[node name="TimeContainer" type="VBoxContainer" parent="MainGameGUI/MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 170

[node name="EnemyTime" type="Label" parent="MainGameGUI/MarginContainer/TimeContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_constants/shadow_outline_size = 15
theme_override_font_sizes/font_size = 100
text = "5:00"
horizontal_alignment = 1

[node name="PlayerTime" type="Label" parent="MainGameGUI/MarginContainer/TimeContainer"]
layout_mode = 2
theme = SubResource("Theme_qwx6e")
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_constants/shadow_outline_size = 15
theme_override_font_sizes/font_size = 100
text = "5:00"
horizontal_alignment = 1

[node name="DebugMenuLogic" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 1199.0
offset_bottom = 894.0
script = ExtResource("3_tmi2x")

[node name="FENDebug" type="Label" parent="DebugMenuLogic"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.158
anchor_top = 0.098
anchor_right = 0.158
anchor_bottom = 0.098
offset_left = 10.158
offset_top = 55.294
offset_right = 444.158
offset_bottom = 81.294
text = "Current Board State: "

[node name="DebugMenuContainer" type="MarginContainer" parent="DebugMenuLogic"]
layout_mode = 2
offset_right = 454.0
offset_bottom = 136.0
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="DebugTextContainer" type="VBoxContainer" parent="DebugMenuLogic/DebugMenuContainer"]
layout_mode = 2
theme_override_constants/separation = 4

[node name="MousePosLabel" type="Label" parent="DebugMenuLogic/DebugMenuContainer/DebugTextContainer"]
layout_mode = 2
text = "MousePos: (0, 0)"

[node name="MousePosGridLabel" type="Label" parent="DebugMenuLogic/DebugMenuContainer/DebugTextContainer"]
layout_mode = 2
text = "MousePosGrid: (0, 0)"

[node name="ChessPieceColorLabel" type="Label" parent="DebugMenuLogic/DebugMenuContainer/DebugTextContainer"]
layout_mode = 2
text = "Piece Color: "

[node name="ChessPieceLabel" type="Label" parent="DebugMenuLogic/DebugMenuContainer/DebugTextContainer"]
layout_mode = 2
text = "Piece: "

[node name="GraphicalBoard" type="TileMap" parent="."]
tile_set = ExtResource("1_i0ywi")
cell_quadrant_size = 128
format = 2
layer_0/tile_data = PackedInt32Array(196612, 65536, 0, 262148, 0, 0, 327684, 65536, 0, 393220, 0, 0, 458756, 65536, 0, 524292, 0, 0, 589828, 65536, 0, 655364, 0, 0, 196613, 0, 0, 262149, 65536, 0, 327685, 0, 0, 393221, 65536, 0, 458757, 0, 0, 524293, 65536, 0, 589829, 0, 0, 655365, 65536, 0, 196614, 65536, 0, 262150, 0, 0, 327686, 65536, 0, 393222, 0, 0, 458758, 65536, 0, 524294, 0, 0, 589830, 65536, 0, 655366, 0, 0, 196615, 0, 0, 262151, 65536, 0, 327687, 0, 0, 393223, 65536, 0, 458759, 0, 0, 524295, 65536, 0, 589831, 0, 0, 655367, 65536, 0, 196616, 65536, 0, 262152, 0, 0, 327688, 65536, 0, 393224, 0, 0, 458760, 65536, 0, 524296, 0, 0, 589832, 65536, 0, 655368, 0, 0, 196617, 0, 0, 262153, 65536, 0, 327689, 0, 0, 393225, 65536, 0, 458761, 0, 0, 524297, 65536, 0, 589833, 0, 0, 655369, 65536, 0, 196618, 65536, 0, 262154, 0, 0, 327690, 65536, 0, 393226, 0, 0, 458762, 65536, 0, 524298, 0, 0, 589834, 65536, 0, 655370, 0, 0, 196611, 0, 0, 262147, 65536, 0, 327683, 0, 0, 393219, 65536, 0, 458755, 0, 0, 524291, 65536, 0, 589827, 0, 0, 655363, 65536, 0)
layer_1/name = "Highlight"
layer_1/enabled = true
layer_1/modulate = Color(0.878431, 0, 0.286275, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = 0
layer_1/tile_data = PackedInt32Array()
script = ExtResource("8_p0nd3")

[connection signal="UpdateBoardState" from="Services/GameInfoService" to="DebugMenuLogic" method="OnUpdateBoardState"]
[connection signal="SetTimerColor" from="Services/TimerService" to="MainGameGUI" method="OnSetTimerColor"]
[connection signal="ToggleTimer" from="Services/TimerService" to="MainGameGUI" method="OnToggleTimer"]
[connection signal="UpdateSideTime" from="Services/TimerService" to="MainGameGUI" method="OnUpdateTimerTime"]
[connection signal="UpdateMousePos" from="Controllers/PlayerInputController" to="DebugMenuLogic" method="OnChessBoardUpdateMousePos"]
